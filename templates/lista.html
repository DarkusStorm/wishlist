<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ titulo }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='reset.css')}}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <h1 id="titulo_pagina">{{ titulo }}</h1>
    <form method="POST">
        <label for="titulo-obra" class="form-label">TÃ­tulo da Obra:</label>
        <input type="text" class="form-control" name="titulo-obra" id="titulo-obra" aria-describedby="ajudaNomeObra" value="{{ obra_selecionada.titulo_obra if obra_selecionada else '' }}" required>
        <div id="ajudaNomeObra" class="form-text">Use um nome que diferencie se vocÃª deseja consumir apenas uma obra especÃ­fica de uma franquia.</div>

        <label for="indicacao_obra" class="form-label">Indicado por:</label>
        <input type="text" class="form-control" name="indicacao-obra" id="indicacao-obra">
        
        <label for="tipo-obra" class="form-label">Informe o tipo de mÃ­dia:</label>
        <select name="tipo-obra" id="tipo-obra" required>
            <option value="filme">Filme</option>
            <option value="serie">SÃ©rie</option>
            <option value="musica">MÃºsica</option>
            <option value="livro">Livro</option>
            <option value="jogo">Jogo</option>
        </select>

        <button type="submit" class="btn btn primary">Salvar</button>
        <div id="lista_obras">
            <h2>Lista de Obras</h2>

            {% if obras_por_tipo %}

                {% set titulos = {
                    'filme': 'ğŸï¸ â€” Filmes:',
                    'serie': 'ğŸ¬ â€” SÃ©ries:',
                    'musica': 'ğŸ¼ â€” MÃºsicas:',
                    'livro': 'ğŸ“š â€” Livros:',
                    'jogo': 'ğŸ•¹ï¸ â€” Jogos:'
                } %}

                {% for tipo, lista in obras_por_tipo.items() %}
        
                    {% if lista %}
                        <h3>{{ titulos[tipo] }}</h3>
                        <ul id="{{ tipo }}">
                            
                            {% for obra in lista %}
                                <li>
                                    <a href="{{ url_for('update', idObra=obra.id_obra) }}">ğŸ“ Editar</a>
                                    â€” {{ obra.titulo_obra }}

                                    {% if obra.indicacao_obra %}
                                        - Indicado por: {{ obra.indicacao_obra }}
                                    {% endif %}

                                    â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a>
                                </li>
                                <br>
                            {% endfor %}

                        </ul>
                    {% endif %}

                {% endfor %}

            {% else %}
                <p>Nenhuma obra a consumir cadastrada.</p>
            {% endif %}

<!-- CÃ³digo descartado de "Lista de Obras"
            {% if obras %}

                {% for obra in obras %}
                    
                    {% if obra.tipo_obra == filme %}

                        <ul id="filmes"><h3>ğŸï¸ â€” Filmes:</h3>
                            <li><a href="{{url_for('update', idObra=obra.id_obra)}}">ğŸ“ Editar</a> â€” {{ obra.titulo_obra }}
                                
                                {% if obra.indicacao_obra %}
                                
                                    - Indicado por: {{ obra.indicacao_obra }} â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                        
                                {% else %}

                                    â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                                
                                {% endif %}
                        </ul>
                    
                    {% elif obra.tipo_obra == serie %}

                        <ul id="series"><h3>ğŸ¬ â€” SÃ©ries:</h3>
                            <li><a href="{{url_for('update', idObra=obra.id_obra)}}">ğŸ“ Editar</a> â€” {{ obra.titulo_obra }}
                                
                                {% if obra.indicacao_obra %}
                                
                                    - Indicado por: {{ obra.indicacao_obra }} â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                        
                                {% else %}

                                    â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                                
                                {% endif %}
                        </ul>

                    {% elif obra.tipo_obra == musica %}

                        <ul id="musicas"><h3>ğŸ¼ â€” MÃºsicas:</h3>
                            <li><a href="{{url_for('update', idObra=obra.id_obra)}}">ğŸ“ Editar</a> â€” {{ obra.titulo_obra }}
                                
                                {% if obra.indicacao_obra %}
                                
                                    - Indicado por: {{ obra.indicacao_obra }} â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                        
                                {% else %}

                                    â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                                
                                {% endif %}
                        </ul>

                    {% elif obra.tipo_obra == livro %}

                        <ul id="livros"><h3>ğŸ“š â€” Livros:</h3>
                            <li><a href="{{url_for('update', idObra=obra.id_obra)}}">ğŸ“ Editar</a> â€” {{ obra.titulo_obra }}

                                {% if obra.indicacao_obra %}
                                
                                    - Indicado por: {{ obra.indicacao_obra }} â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                        
                                {% else %}

                                    â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                                
                                {% endif %}
                        </ul>

                    {% else %}

                        <ul id="jogos"><h3>ğŸ•¹ï¸ â€” Jogos:</h3>
                            <li><a href="{{url_for('update', idObra=obra.id_obra)}}">ğŸ“ Editar</a> â€” {{ obra.titulo_obra }}

                                {% if obra.indicacao_obra %}
                                
                                    - Indicado por: {{ obra.indicacao_obra }} â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                        
                                {% else %}

                                    â€” <a href="{{ url_for('delete', idObra=obra.id_obra) }}">Apagar ğŸ—‘ï¸</a></li>
                                
                                {% endif %}
                        </ul>
                    
                    {% endif %}

                {% endfor %}
            
            {% else %}
                
                <p>Nenhuma obra a consumir cadastrada.</p>
            
            {% endif %}
-->